<div class="d-flex flex-column flex-md-row gap-5 product-info px-4">
  <%# Product Image %>
  <div class="product-image p-4 align-self-center d-flex align-items-center justify-content-center">
    <%= image_tag @product.image_url %>
  </div>
  <%# Product Name %>
  <div class="d-flex flex-column mx-2 align-items-md-start">
    <h1 class="mb-3 product-name">
      <%= @product.name%>
    </h1>
    <%# Rating %>
    <div class="star-rating">
      <%= star_rating(@product.rating_rate) %><%= @product.rating_rate %>/5
    </div>
    <%# Price %>
    <h2 class="">
      <%= number_to_currency(@product.price) %>
    </h2>
    <%# Description %>
    <p class="text-secondary">
      <%= @product.description.first.capitalize %><%= @product.description.to_s[1..-1]%>
    </p>
    <%# TODO: Make size selectable if's clothing, not the backpack in men's clothing %>
    <% if ["men's clothing", "women's clothing"].include?(@product.category) && @product.name != "Fjallraven - Foldsack No. 1 Backpack, Fits 15 Laptops" %>
      <div class="">
        <button class="">S</button>
        <button class="">M</button>
        <button class="">L</button>
        <button class="">XL</button>
      </div>
    <% end %>
    <%# TODO: Make a quantity selector %>
    <%# Buttons %>
    <div class="d-flex flex-column flex-md-row gap-2 w-100 w-lg-50">
      <%# Add to cart button %>
      <%= button_to "Add to cart", cart_items_path(product_id: @product.id),
      method: :post,
      class: "btn add-to-cart-button w-100 w-md-25" %>
      <%# Add to favorties button %>
      <%= button_to "Add to wishlist", favorites_path(product_id: @product.id),
      method: :post,
      class: "btn btn-primary add-to-wishlist-button w-100 w-md-25" %>
    </div>
  </div>
</div>
<div class="d-flex justify-content-between">
  <%# Reviews %>
  <h4>Reviews (<%= @product.reviews.count %>)</h4>
  <%# Rating %>
  <div class="star-rating">
    <%= star_rating(@product.rating_rate) %> (<%= @product.rating_count %> reviews)
  </div>
</div>
<% if @reviews.blank? %>
  <p>No reviews yet. Be the first to review this product.</p>
<% else %>
  <% @reviews.each do |review| %>
    <div class="review mb-3 p-2">
      <strong><%= review.user&.first_name %></strong>
      <span class="text-secondary"><%= time_ago_in_words(review.created_at) %> ago</span>
      <div class="text-secondary star-rating"><%= star_rating(review.rating) %></div>
      <p class="mt-2"><%= simple_format(h(review.comment)) %></p>
    </div>
  <% end %>
<% end %>
